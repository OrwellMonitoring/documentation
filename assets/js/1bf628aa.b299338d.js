"use strict";(self.webpackChunkorwell_docs=self.webpackChunkorwell_docs||[]).push([[838],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||s;return n?r.createElement(f,o(o({ref:t},p),{},{components:n})):r.createElement(f,o({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=n.length,o=new Array(s);o[0]=d;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:i,o[1]=a;for(var c=2;c<s;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},309:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return a},metadata:function(){return c},toc:function(){return u}});var r=n(7462),i=n(3366),s=(n(7294),n(3905)),o=["components"],a={sidebar_position:2,custom_edit_url:null},l="PerfSonar Utils",c={unversionedId:"metrics-export/perfsonar",id:"metrics-export/perfsonar",title:"PerfSonar Utils",description:"Utils that abstract the interaction with PerfSonar. It includes debugging scripts, code samples, installation scripts and a Kafka connector.",source:"@site/docs/metrics-export/perfsonar.md",sourceDirName:"metrics-export",slug:"/metrics-export/perfsonar",permalink:"/documentation/metrics-export/perfsonar",editUrl:null,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"How to create an OS boot service",permalink:"/documentation/metrics-export/create-os-boot-service"},next:{title:"Python Package",permalink:"/documentation/pythonPackage"}},p={},u=[{value:"Esmond Scripts",id:"esmond-scripts",level:2},{value:"Pscheduler Scripts",id:"pscheduler-scripts",level:2},{value:"Init Scripts",id:"init-scripts",level:2},{value:"Pull Service",id:"pull-service",level:2}],d={toc:u};function m(e){var t=e.components,n=(0,i.Z)(e,o);return(0,s.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"perfsonar-utils"},"PerfSonar Utils"),(0,s.kt)("p",null,"Utils that abstract the interaction with PerfSonar. It includes debugging scripts, code samples, installation scripts and a Kafka connector."),(0,s.kt)("h2",{id:"esmond-scripts"},"Esmond Scripts"),(0,s.kt)("p",null,"In the ",(0,s.kt)("inlineCode",{parentName:"p"},"esmond")," folder there are 4 debugging scripts for interacting with the esmond API, which is where test results are stored. "),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"python3 get-tests.py")," - Prints all the tests available"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"python3 get-test-events.py <test-key>")," - Prints all the events for a specific test. Events are the metrics' labels"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"python3 get-test-event-base-result.py <test-key> <event-type>")," - Prints event values' information"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"python3 get-test-event-summary-result.py <test-key> <event-type> <summary> <window>")," - Prints event values' information, but not in its raw form, the data is transformed, usually, by aggregation or statistic analysis")),(0,s.kt)("h2",{id:"pscheduler-scripts"},"Pscheduler Scripts"),(0,s.kt)("p",null,"In the ",(0,s.kt)("inlineCode",{parentName:"p"},"pscheduler")," folder there are 3 debugging scripts for interacting with the pscheduler API, which is PerfSonar's component responsible for scheduling test runs. "),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"python3 get-tasks.py")," - Tests loading all tasks' urls"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"python3 create-tasks.py")," - Tests importing the tasks defined in ",(0,s.kt)("inlineCode",{parentName:"li"},"config.json")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"python3 clean-tasks.py")," - Cancels all tasks")),(0,s.kt)("h2",{id:"init-scripts"},"Init Scripts"),(0,s.kt)("p",null,"Inside of the ",(0,s.kt)("inlineCode",{parentName:"p"},"init")," folder is where the two PerfSonar's initialization scripts are found, for the Toolkit and Testpoint versions. Both scripts start docker containers but , unfortunatly, we were not able to transform these scripts into Docker images because of the required dependencies of the systemd service while installing."),(0,s.kt)("p",null,"Both scripts use the included ",(0,s.kt)("inlineCode",{parentName:"p"},"ntp.conf")," file, which sets up the NTP service inside of the containers. If your network blocks some NTP servers you may have to update this file for your situation, as tests will only run if both intervinients are in sync."),(0,s.kt)("p",null,"For the ",(0,s.kt)("inlineCode",{parentName:"p"},"perfsonar_toolkit_init.sh")," script you should replace the ip address in ",(0,s.kt)("inlineCode",{parentName:"p"},"esmond_manage add_user_ip_address user 10.0.12.82")," for the ip address running any script that interacts with the esmond API. You may run that command as many times as you wish if more than one address is required."),(0,s.kt)("h2",{id:"pull-service"},"Pull Service"),(0,s.kt)("p",null,"Service responsible for pulling metrics from the esmond API and sending them to Kafka so that a translator can afterwards integrate PerfSonar's metrics with the rest of the system. For this script both ",(0,s.kt)("inlineCode",{parentName:"p"},"BASE_URL")," (PerfSonar toolkit address) and ",(0,s.kt)("inlineCode",{parentName:"p"},"KAFKA_URL")," source address must be updated for the specific case."))}m.isMDXComponent=!0}}]);