"use strict";(self.webpackChunkorwell_docs=self.webpackChunkorwell_docs||[]).push([[4731],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return d}});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=c(r),d=i,f=m["".concat(l,".").concat(d)]||m[d]||p[d]||a;return r?n.createElement(f,o(o({ref:t},u),{},{components:r})):n.createElement(f,o({ref:t},u))}));function d(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=r.length,o=new Array(a);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var c=2;c<a;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},2702:function(e,t,r){r.r(t),r.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p}});var n=r(7462),i=r(3366),a=(r(7294),r(3905)),o=["components"],s={sidebar_position:1,custom_edit_url:null},l="How to create an OS boot service",c={unversionedId:"metrics-export/create-os-boot-service",id:"metrics-export/create-os-boot-service",title:"How to create an OS boot service",description:"Introduction",source:"@site/docs/metrics-export/create-os-boot-service.md",sourceDirName:"metrics-export",slug:"/metrics-export/create-os-boot-service",permalink:"/documentation/metrics-export/create-os-boot-service",editUrl:null,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"Congratulations!",permalink:"/documentation/tutorial-basics/congratulations"},next:{title:"Python Package",permalink:"/documentation/pythonPackage"}},u={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Where are the services?",id:"where-are-the-services",level:2},{value:"Structure of  <code>.service</code> file",id:"structure-of--service-file",level:2},{value:"Example of a simple service",id:"example-of-a-simple-service",level:2},{value:"Important commands that can be useful",id:"important-commands-that-can-be-useful",level:2}],m={toc:p};function d(e){var t=e.components,s=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,n.Z)({},m,s,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"how-to-create-an-os-boot-service"},"How to create an OS boot service"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"This document serves as support for the creation of services in OS, i.e., services that run in the operating system to perform specific tasks."),(0,a.kt)("h2",{id:"where-are-the-services"},"Where are the services?"),(0,a.kt)("p",null,"The services to be run by the operating system must be located in the following directory: ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/systemd/system"),".\nWithin this directory, the file ('.service') in which the new service is created must be created, i.e. ",(0,a.kt)("inlineCode",{parentName:"p"},"example.service")),(0,a.kt)("h2",{id:"structure-of--service-file"},"Structure of  ",(0,a.kt)("inlineCode",{parentName:"h2"},".service")," file"),(0,a.kt)("p",null,"This files have 3 big groups : ","[Unit]",", ","[Service]",", ","[Install]"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"[Unit]"," "),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Description")," = A short description of the unit."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Documentation")," =\tA list of URIs referencing documentation."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Before, After")," =\tThe order in which units are started."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Requires")," = If this unit gets activated, the units listed here will be activated as well. If one of the other units gets deactivated or fails, this unit will be deactivated."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Wants")," =\tConfigures weaker dependencies than Requires. If any of the listed units does not start successfully, it has no impact on the unit activation. This is the recommended way to establish custom unit dependencies."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Conflicts")," =\tIf a unit has a Conflicts setting on another unit, starting the former will stop the latter and vice versa."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"[Service]"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Type")," = Configures the process start-up type"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ExecStart")," = Commands with arguments to execute when the service is started. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ExecStop")," = Commands to execute to stop the service started via ExecStart."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ExecReload")," = Commands to execute to trigger a configuration reload in the service."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Restart")," = With this option enabled, the service shall be restarted when the service process exits, is killed, or a timeout is reached with the exception of a normal stop by the systemctl stop command."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"RemainAfterExit")," = If set to True, the service is considered active even when all its processes exited. Useful with Type = o neshot. Default value is False."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"[Install]"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Alias")," = A space-separated list of additional names for the unit. Most systemctl commands, excluding systemctl enable, can use aliases instead of the actual unit name."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"RequiredBy, WantedBy")," = The current service will be started when the listed services are started. See the description of Wants and Requires in the ","[Unit]"," section for details."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Also")," = Specifies a list of units to be enabled or disabled along with this unit when a user runs systemctl enable or systemctl disable.")))),(0,a.kt)("h2",{id:"example-of-a-simple-service"},"Example of a simple service"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"service",src:r(3825).Z,width:"733",height:"161"})," "),(0,a.kt)("h2",{id:"important-commands-that-can-be-useful"},"Important commands that can be useful"),(0,a.kt)("p",null,"Reload the service files to include the new service. (Mandatory)",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"sudo systemctl daemon-reload")),(0,a.kt)("p",null,"Start your service (Mandatory)",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"sudo systemctl start your-service.service")),(0,a.kt)("p",null,"To check the status of your service (Optional)",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"sudo systemctl status example.service"),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"sudo systemctl -l --no-pager  status example.service")," (This command give you a more detailed information, super important for DEBUG) "),(0,a.kt)("p",null,"To enable your service on every reboot (Optional)",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"sudo systemctl enable example.service")))}d.isMDXComponent=!0},3825:function(e,t,r){t.Z=r.p+"assets/images/service-a0b2eced3287a431e33dce6b1d8e6919.jpg"}}]);